# Configuraci칩n de Caddy para ReportesWeb
# Reverse proxy para FastAPI + servir frontend est치tico

:3000 {
    # Logs
    log {
        output file c:/ReportesWeb/caddy.log
        format console
    }

    # Rutas del API - proxy al backend FastAPI
    reverse_proxy /api/* localhost:8000
    reverse_proxy /docs localhost:8000
    reverse_proxy /redoc localhost:8000
    reverse_proxy /openapi.json localhost:8000

    # Servir archivos est치ticos del frontend compilado
    root * c:/ReportesWeb/reporter_frontend/dist
    
    # Intentar servir archivos est치ticos, si no existe servir index.html (SPA)
    try_files {path} /index.html
    
    file_server
    
    # Headers de seguridad
    header {
        # Prevenir clickjacking
        X-Frame-Options "SAMEORIGIN"
        # Prevenir MIME sniffing
        X-Content-Type-Options "nosniff"
        # XSS Protection
        X-XSS-Protection "1; mode=block"
    }
}
